<%- include('partials/_header', { title: 'Dashboard' }) %>

<div class="row p-0 py-5 m-0 mt-5">
  <div class="col-lg-2 col-md-2 d-lg-inline d-md-inline d-none">
    <%- include('partials/_sidebar') %>
  </div>
  <div class="col-lg-10 col-md-10 col-sm-12">  <!-- User's Courses Section -->
  <div class="row">
     <div class="card border-0">
        <div class="card-body bg-secondary-subtle">
            <div class="card-header bg-transparent border-bottom border-3 border-primary pb-0">
                <h2 class="card-title"><%= userProfile.name %></h2>
            </div>
            <div class="d-lg-flex justify-content-between">
                <div class="mt-3">
                    <div class="card-text">
                        <span class="fw-bold">Email : </span>
                        <%= userProfile.email %>
                    </div>
                    <% if(userProfile.page_link){ %>
                        <div class="card-text">
                            <span class="fw-bold">Page Link : </span>
                            <a href="<%= userProfile.page_link %>" target="_blank" ><%= userProfile.page_link %></a>
                        </div>
                    <% } %>
                    <% if(userProfile.repository_link){ %>
                        <div class="card-text">
                            <span class="fw-bold">Repository Link : </span>
                            <a href="<%= userProfile.repository_link %>" target="_blank" ><%= userProfile.repository_link %></a>
                        </div>
                    <% } %>
    
                    <% if(userProfile.id == user.id || user.role == "admin"){ %>
                        <div class="d-flex gap-3 my-3">
                        <div><a class="btn btn-primary fw-bold" href="/users/edit/<%=userProfile.id%>">Edit</a></div>
                        <% if(userProfile.role == "deleted"){ %>
                            <p class="text-warning">Account deleted</p>
                        <% }else{ %>
                            <form action="/users/delete/<%=userProfile.id%>" method="POST" onclick="return confirm('Are you sure you want to delete your account?')">
                              <input type="submit" class="btn btn-danger fw-bold" value="Delete Account">
                            </form>
                        <% } %>
                        </div>
                    <% } %>
                </div>
                <div class="my-2">
                    <img src="<%= userProfile.avatar %>" alt="user avatar" class="border border-1 border-primary" width="200px">
                    <div>
                        <span class="text-muted"><% if (userProfile.role=="student") { %>
                            Student
                            <% }else if(userProfile.role=="admin"){ %>
                            Admin
                            <% }else if(userProfile.role=="teacher") { %>
                            Teacher
                            <% } else { %>
                            Deleted
                            <% } %>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
  </div>
  </div>
</div>

<%- include('partials/_footer') %>
















